version: 1.0.{build}-{branch}

environment:
  matrix:
    - RUBY_VERSION: "200-x64"

clone_folder: c:\projects\openstudio-server

services: mongodb

install:
  - curl -SLO https://openstudio-resources.s3.amazonaws.com/pat-dependencies/OpenStudio2-1.13.0.fb588cc683-win32.zip
  - mkdir c:\projects\openstudio
  - 7z x OpenStudio2-1.13.0.fb588cc683-win32.zip -oc:\projects\openstudio
  - set RUBYLIB=C:\projects\openstudio\Ruby
  - set PATH=C:\Ruby%RUBY_VERSION%\bin;%PATH%
  - C:\Ruby%RUBY_VERSION%\bin\ruby C:\Ruby%RUBY_VERSION%\bin\gem update --system
  - C:\Ruby%RUBY_VERSION%\bin\ruby c:\projects\openstudio-server\bin\openstudio_meta install_gems --with_test_develop --debug --verbose

build: off

before_test:
  - ruby -v
  - gem -v
  - bundle -v

test_script:
  - bundle exec rspec